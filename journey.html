<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Journey</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>

<body>

<section class="journey">

<h1 class="journey-title">
Our Story â€” Across Every Lifetime ðŸ’™
</h1>

<div class="journey-wrapper">

<!-- SVG LINE -->
<svg class="journey-line" preserveAspectRatio="none">
    <path d="" />
</svg>

<!-- MEMORY ITEMS -->

<div class="journey-item">
    <img src="timeline/Pre-Historic.png">
    <div class="card">
        <h3>Before history was written</h3>
        <p>I think I would have found you even when the world was still wild.</p>
    </div>
</div>

<div class="journey-item right">
    <img src="timeline/10th Century.png">
    <div class="card">
        <h3>In another kingdom</h3>
        <p>Maybe destiny was already pulling us together.</p>
    </div>
</div>

<div class="journey-item">
    <img src="timeline/Pre_Independence.png">
    <div class="card">
        <h3>When the world was changing</h3>
        <p>Through revolutions and hope â€” side by side.</p>
    </div>
</div>

<div class="journey-item right">
    <img src="timeline/80s.png">
    <div class="card">
        <h3>If we met in another decade</h3>
        <p>I know I still wouldâ€™ve fallen for that smile.</p>
    </div>
</div>

<div class="journey-item">
    <img src="timeline/Modern.png">
    <div class="card">
        <h3>And here we are</h3>
        <p>Every lifetime somehow led me to you.</p>
    </div>
</div>

</div>

<div class="closing">
Still choosing you â€” in this lifetime and the next.
</div>

</section>

<script>
window.addEventListener("load", function(){

    const items = document.querySelectorAll(".journey-item");
    const svg = document.querySelector(".journey-line");
    const path = svg.querySelector("path");
    const wrapper = document.querySelector(".journey-wrapper");

    function drawPath(){

        const wrapperRect = wrapper.getBoundingClientRect();
        const wrapperWidth = wrapper.offsetWidth;
        const wrapperHeight = wrapper.scrollHeight;

        svg.setAttribute("viewBox", `0 0 ${wrapperWidth} ${wrapperHeight}`);
        svg.setAttribute("height", wrapperHeight);
        svg.setAttribute("width", wrapperWidth);

        let d = "";

        items.forEach((item, i)=>{

            const rect = item.getBoundingClientRect();

            // Keep curve in empty space
            const x = i % 2 === 0
                ? wrapperWidth * 0.18
                : wrapperWidth * 0.82;

            const y =
                rect.top - wrapperRect.top +
                rect.height / 2;

            if(i === 0){
                d += `M ${x} ${y}`;
            } else {

                const prevRect =
                    items[i-1].getBoundingClientRect();

                const prevX = i % 2 === 0
                    ? wrapperWidth * 0.82
                    : wrapperWidth * 0.18;

                const prevY =
                    prevRect.top -
                    wrapperRect.top +
                    prevRect.height / 2;

                const curve = 200;

                d += ` C ${prevX} ${prevY + curve},
                       ${x} ${y - curve},
                       ${x} ${y}`;
            }
        });

        path.setAttribute("d", d);
    }

    drawPath();
    window.addEventListener("resize", drawPath);

});
</script>

</body>
</html>
