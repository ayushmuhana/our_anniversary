<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Journey</title>

<link rel="stylesheet" href="style.css">
</head>

<body>

<section class="journey">

<h1 class="journey-title">
Our Story â€” Across Every Lifetime ðŸ’™
</h1>

<div class="journey-wrapper">


<!-- SVG LINE -->
<svg class="journey-line"
     width="100%"
     height="100%"
     preserveAspectRatio="none">

    <defs>
        <marker id="arrow"
                markerWidth="12"
                markerHeight="12"
                refX="10"
                refY="6"
                orient="auto">

            <path d="M0,0 L12,6 L0,12 Z"
                  fill="#b6dbf2"></path>

        </marker>
    </defs>

    <path
        d=""
        stroke="#b6dbf2"
        stroke-width="8"
        fill="none"
        marker-end="url(#arrow)">
    </path>

</svg>



<!-- MEMORY ITEMS -->

<div class="journey-item">
    <img src="timeline/Pre-Historic.png">
    <div class="card">
        <h3>Before history was written</h3>
        <p>I think I would have found you even when the world was still wild.</p>
    </div>
</div>


<div class="journey-item right">
    <img src="timeline/10th Century.png">
    <div class="card">
        <h3>In another kingdom</h3>
        <p>Maybe destiny was already pulling us together.</p>
    </div>
</div>


<div class="journey-item">
    <img src="timeline/Pre_Independence.png">
    <div class="card">
        <h3>When the world was changing</h3>
        <p>Through revolutions and hope â€” side by side.</p>
    </div>
</div>


<div class="journey-item right">
    <img src="timeline/80s.png">
    <div class="card">
        <h3>If we met in another decade</h3>
        <p>I know I still wouldâ€™ve fallen for that smile.</p>
    </div>
</div>


<div class="journey-item">
    <img src="timeline/Modern.png">
    <div class="card">
        <h3>And here we are</h3>
        <p>Every lifetime somehow led me to you.</p>
    </div>
</div>


</div>


<div class="closing">
Still choosing you â€” in this lifetime and the next.
</div>

</section>

<script>

window.addEventListener("load", function(){

    const items = document.querySelectorAll(".journey-item");
    const svg = document.querySelector(".journey-line");
    const path = svg.querySelector("path");
    const wrapper = document.querySelector(".journey-wrapper");

    function drawPath(){

        if(items.length === 0) return;

        const wrapperWidth = wrapper.offsetWidth;
        const wrapperHeight = wrapper.scrollHeight;

        // VERY IMPORTANT
        svg.setAttribute("viewBox", `0 0 ${wrapperWidth} ${wrapperHeight}`);
        svg.setAttribute("height", wrapperHeight);

        let d = "";

        items.forEach((item, i)=>{

            const x = i % 2 === 0
                ? wrapperWidth * 0.3
                : wrapperWidth * 0.7;

            const y = item.offsetTop + item.offsetHeight/2;

            if(i === 0){
                d += `M ${x} ${y}`;
            }else{

                const prevX = i % 2 === 0
                    ? wrapperWidth * 0.7
                    : wrapperWidth * 0.3;

                const prevY =
                    items[i-1].offsetTop +
                    items[i-1].offsetHeight/2;

                const curve = 250;

                d += ` C ${prevX} ${prevY + curve},
                        ${x} ${y - curve},
                        ${x} ${y}`;
            }
        });

        path.setAttribute("d", d);
    }

    drawPath();

    // resize safe
    let resizeTimer;

    window.addEventListener("resize", ()=>{
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(drawPath, 200);
    });

});

</script>

</body>
</html>
